pipeline{
    agent any

    parameters {
        //string(name: 'VERSION_TYPE', defaultValue: none , description: 'type of version to be published')
        choice(name: 'VERSION_TYPE', choices: ['minor','patch', 'major'], description:'Type of version to be published')
    }

    tools{
        nodejs 'node18'
    }

    stages {
        stage('Install'){
            steps{
                sh 'npm install'
            }            
        }
        stage('Builds'){
            steps{
                sh 'npm run build'
            }            
        }
        stage('Test'){
            steps{
                sh 'npm run test'
            }
        }
        stage('Publish'){
            steps{
                sh 'npm version ${VERSION_TYPE}'
            }
        }
    }
    
}
